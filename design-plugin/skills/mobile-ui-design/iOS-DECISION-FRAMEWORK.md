# iOSインターフェース設計 意思決定フレームワーク

人間工学、認知負荷、視覚的階層構造に基づくiOS UIの設計判断基準。

---

## 概要：5つの意思決定領域

| 領域 | 決定事項 | 根本原理 |
|------|----------|----------|
| 1. ナビゲーション構造 | Sheet vs 画面遷移 | コンテキスト維持とタスク完結性 |
| 2. インタラクション人間工学 | ボタン配置・サイズ | フィッツの法則、親指ゾーン |
| 3. 視覚的マテリアリティ | ボタンの浮き具合 | 深度(Z-Index)、Elevation |
| 4. 情報アーキテクチャ | タブ項目、コンポーネント数 | 認知負荷、メンタルモデル |
| 5. 情報伝達 | 文字量、色 | Dynamic Type、セマンティックカラー |

---

## 1. ナビゲーション構造：Sheet vs Push

### 基本原則

**プッシュ遷移（Push）** = 情報の「深化」
- 親子関係：リスト → 詳細
- 心理状態：「閲覧中」「探索中」
- 戻るボタンで履歴をたどる

**モーダル（Sheet）** = 現在フローからの「一時的離脱」
- 独立したタスク
- 心理状態：「作業中」「入力中」
- 完了/キャンセルで閉じる（履歴に残らない）

### 判定マトリクス

| 判定基準 | Push を選択 | Sheet を選択 |
|----------|-------------|--------------|
| **タスク目的** | 情報の閲覧・詳細化 | データの作成・編集・選択 |
| **データの流れ** | 参照（Read-Only） | 入力（Write/Input） |
| **コミットメント** | 低：いつでも戻れる | 高：保存/キャンセルが必要 |
| **コンテキスト維持** | 文脈の切り替え | 文脈の並存（親画面を参照） |
| **構造** | 線形（A→B→C） | 自己完結（A→[B]→A） |

### Sheet の種類

| タイプ | 使用場面 |
|--------|----------|
| **ハーフシート (Medium Detent)** | 背面の情報を参照しながら操作（地図+検索結果など） |
| **フルスクリーン** | 複雑な多段階タスク、没入型コンテンツ |

**注意**: モーダル上にモーダルを重ねることは避ける

---

## 2. ボタン配置の人間工学

### 親指ゾーン（Thumb Zone）

大画面化により、画面上部へのアクセスは困難。画面下部が「プライム・リアルエステート」。

### 配置の判定マトリクス

| 判定要素 | 右上（Navigation Bar） | 下部（Sticky/Floating） |
|----------|------------------------|-------------------------|
| **頻度** | 低頻度（設定、フィルタ） | 高頻度（購入、新規作成） |
| **性質** | 状態管理（閲覧↔編集） | 進行（次へ、完了） |
| **コンテンツ干渉** | 非干渉 | オーバーレイ許容 |
| **キーボード** | 安全（隠れない） | 要調整（Keyboard Avoidance必須） |
| **視線誘導** | 探索的（意図的に探す） | 結論的（自然に到達） |

### ボタンサイズ

**44ptルール（絶対基準）**
- 視覚サイズが24x24ptでも、タップ領域は必ず **44x44pt以上**
- VisionOS/iPadでは60x60pt推奨

**幅の選択**
| タイプ | 用途 |
|--------|------|
| フル幅（Edge-to-Edge） | 最重要アクション（購入、登録） |
| カプセル型（固定幅） | 複数選択肢を横並び |

---

## 3. 視覚的深度：ボタンの浮き具合

### iOS の深度表現

Material Design = 影の濃さ
iOS = **半透明性（Translucency）** + **ぼかし（Blur）**

### 浮かせる判定基準

| 状態 | フラット/塗り | フローティング（Shadow/Blur） |
|------|---------------|-------------------------------|
| **スクロール関係** | 背景固定、コンテンツが潜り込まない | コンテンツが下をスクロール |
| **階層レベル** | コンテンツの一部 | グローバルツール（現在地ボタン等） |
| **視覚ノイズ** | 低（多用可能） | 高（1-2箇所のみ） |

### iOSらしい影の設定

```swift
.shadow(
    color: Color.black.opacity(0.15),  // 不透明度 10-20%
    radius: 10,                         // 半径 10-20pt（大きくぼかす）
    x: 0,
    y: 5                                // Yオフセット 5-10pt
)
```

**マテリアル（Blur）の活用**
- `UltraThinMaterial` / `RegularMaterial`（すりガラス効果）
- 背景が透けてコンテキスト維持 + 視認性確保

---

## 4. 情報アーキテクチャ：タブバーとコンポーネント密度

### タブバー項目の選定

**原則**: タブは **ナビゲーション（場所移動）** に使用、**アクション（機能実行）** には使用しない

| 評価軸 | タブに入れる | タブから除外 |
|--------|--------------|--------------|
| **機能性質** | ビュー（ホーム、検索、ライブラリ） | アクション（投稿、カメラ起動） |
| **利用頻度** | 高頻度（毎回アクセス） | 低頻度（設定、ヘルプ） |
| **相互排他性** | モードレス（状態保持して移動可） | モード依存（特定文脈のみ有効） |
| **項目数** | **3〜5個** | 6個以上（「その他」は発見性低下） |

**中央の＋ボタン**: アプリのコアバリューがコンテンツ生成の場合のみ正当化

### コンポーネント密度

| ユーザーモード | 推奨密度 | 例 |
|----------------|----------|-----|
| **探索・ブラウジング** | 低密度：大画像、少テキスト、1-2項目/画面 | Instagram、TikTok |
| **管理・検索** | 高密度：小テキスト、リスト、7-10行/画面 | メール、設定 |
| **ダッシュボード** | 中密度：グリッド/カード、3-5 KPI | Apple Health |

### リストスタイル

| スタイル | 効果 | 用途 |
|----------|------|------|
| **Inset Grouped** | 背景とのコントラストで整理感、認知負荷↓ | 設定、フォーム |
| **Plain** | 情報量最大化、圧迫感あり | 連絡先、メール一覧 |

---

## 5. タイポグラフィと色彩

### Dynamic Type（必須）

**絶対px指定は禁止**。ユーザー設定でスケールする Dynamic Type を使用。

| スタイル | デフォルトサイズ | 用途 |
|----------|------------------|------|
| Large Title | 34pt | 画面主要タイトル |
| Title 1/2/3 | 28/22/20pt | セクション見出し |
| **Body** | **17pt** | **本文（基準点）** |
| Callout | 16pt | 補足情報 |
| Subhead | 15pt | リスト副題 |
| Footnote/Caption | 13/12pt | 注釈、タイムスタンプ |

**判定**: サイズより **太さ（Weight）** と **色** で優先度を表現

### セマンティックカラー（必須）

**固定色（#000000）は禁止**。ダークモード対応のセマンティックカラーを使用。

| 役割 | セマンティックカラー | ライトモード | ダークモード |
|------|----------------------|--------------|--------------|
| 主要テキスト | `label` | 黒 | 白 |
| 副次テキスト | `secondaryLabel` | ダークグレー | ライトグレー |
| 無効/補足 | `tertiaryLabel` | より薄いグレー | より薄いグレー |
| 背景 | `systemBackground` | 白 | 黒 |
| グループ背景 | `secondarySystemBackground` | 薄いグレー | 濃いグレー |
| アクション | `tintColor` | ブランドカラー | 明度上げたブランドカラー |

### 文字量の目安

- 1行の文字数: **全角20〜25文字**（英数40〜50文字）
- iPad等の広幅画面: `ReadableContentGuide` で行長を制限

---

## 統合された意思決定プロセス

### ステップ1：構造を決める
タスクが「親画面の深化」→ **Push**
タスクが「独立した作業」→ **Sheet**

### ステップ2：配置を決める
高頻度アクション → **画面下部**（親指ゾーン）
状態変更 → **右上**

### ステップ3：表現を決める
重要ボタン → **影/Blur で浮かせる**
背景 → **セマンティックカラー**

### ステップ4：量を決める
主要要素は **3〜5つ** に絞る
詳細情報は **ドリルダウン** させる

---

## クイックリファレンス

### Sheet vs Push 早見表

```
閲覧・詳細化 → Push
作成・編集   → Sheet
参照しながら作業 → ハーフSheet
没入タスク   → フルスクリーンSheet
```

### ボタン配置 早見表

```
購入・送信・次へ → 下部（Sticky）
編集・完了・保存 → 右上（Nav Bar）
高頻度アクション → 下部
低頻度設定    → 右上または内部
```

### 深度表現 早見表

```
コンテンツ上をスクロール → 浮かせる（Shadow/Blur）
固定背景内のボタン    → フラット
Primary CTA のみ   → 浮かせる
それ以外       → フラット
```
