---
name: troubleshooting-capture
description: 問題解決の知識をスキルファイルとして蓄積・文書化します。スクリーンショットを撮ったとき、バグの解消方法を見つけたとき、なにかで詰まったとき、ユーザから指摘を受けたときに使用してください。
---

# トラブルシューティング知識キャプチャ

問題解決の過程と解決方法を、再利用可能なスキルファイルとして蓄積する。

## 発動条件

以下のいずれかに該当する場合、このスキルを発動:

1. **スクリーンショットを撮ったとき**: エラー画面、問題の状態を記録した場合
2. **バグの解消方法を見つけたとき**: 試行錯誤の末に解決策を発見した場合
3. **なにかで詰まったとき**: 調査・デバッグに時間を要した場合
4. **ユーザから指摘を受けたとき**: 誤りや改善点を指摘された場合

## キャプチャワークフロー

### ステップ1: 問題の整理

以下を明確にする:

```markdown
## 問題
- **現象**: 何が起きたか（エラーメッセージ、症状）
- **発生条件**: いつ、どのような操作で発生したか
- **影響範囲**: どの機能・ファイルに影響があったか
```

### ステップ2: 原因分析

根本原因を特定:

```markdown
## 原因
- **直接原因**: 何が問題を引き起こしたか
- **根本原因**: なぜその状態になったか
- **見落としポイント**: 最初に気づけなかった理由
```

### ステップ3: 解決策の記録

実行した解決策を記録:

```markdown
## 解決策
- **対処方法**: 具体的な修正内容
- **コード例**: 修正前後のコード（該当する場合）
- **確認方法**: 解決を確認した手順
```

### ステップ4: 予防策の検討

再発防止のための知見:

```markdown
## 予防策
- **チェックポイント**: 今後注意すべき点
- **パターン認識**: 類似問題の早期発見方法
```

## スキルファイルの作成

上記の情報を整理したら、プロジェクトの`.claude/skills/`に保存:

### 保存先の決定

```
.claude/skills/
└── troubleshooting/
    ├── <category>-<problem-name>/
    │   └── SKILL.md
```

**カテゴリ例**:
- `build`: ビルド・コンパイルエラー
- `runtime`: 実行時エラー
- `config`: 設定・環境問題
- `ui`: UI/UX関連
- `api`: API・通信関連

### SKILL.mdテンプレート

```yaml
---
name: ts-<category>-<problem-name>
description: <問題の簡潔な説明>。<症状やエラーメッセージのキーワード>が発生した場合に参照してください。
---

# <問題タイトル>

## 症状
<エラーメッセージや現象>

## 原因
<根本原因の説明>

## 解決策
<具体的な修正手順>

## 例
\`\`\`<language>
// 修正前
<問題のあるコード>

// 修正後
<正しいコード>
\`\`\`

## 関連
- <関連するドキュメントやリンク>
```

## 命名規則

- **name**: `ts-<category>-<problem>` 形式
  - 例: `ts-build-swift-package-resolve`
  - 例: `ts-runtime-null-reference`
  - 例: `ts-config-env-variable`

- **ファイル名**: 問題を端的に表す英語
  - 例: `swift-package-resolve/SKILL.md`
  - 例: `null-reference-error/SKILL.md`

## 出力確認

作成後、以下を確認:

1. **再現可能性**: 同じ問題に遭遇した際に解決できる情報か
2. **検索可能性**: descriptionにキーワードが含まれているか
3. **簡潔さ**: 不要な情報を含んでいないか

## クイックキャプチャ

時間がないときの最小限の記録:

```yaml
---
name: ts-quick-<keyword>
description: <問題>の解決方法。<キーワード>で検索してください。
---

# <問題>

**原因**: <一行で>
**解決**: <一行で>
```
