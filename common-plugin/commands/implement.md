---
description: 機能実装を要件に基づいて実装・レビューを反復して完成させる
argument-hint: [機能実装の要件]
---

# 機能実装コマンド

## ステップ0: ブランチ作成

**最初に必ず作業用ブランチを作成してください。**

```bash
git checkout -b feature/<作業内容を表す名前>
```

- mainブランチで直接作業しない
- ブランチ名は作業内容がわかる名前にする（例: `feature/add-login`, `feature/user-profile`）

---

## 前提条件の確認

以下のサブエージェントの存在を確認してください：

1. **調査系サブエージェント** - `investigator`など、バグ調査や実装方法調査を行うエージェント
2. **実装系サブエージェント** - `implementer`など、コードを実装するエージェント
3. **コードレビューサブエージェント** - `code-reviewer`など、コード品質をチェックするエージェント

**確認方法**: 利用可能なサブエージェント一覧を確認し、上記に該当するものがあるか判定してください。

**存在しないサブエージェントがある場合**:
ユーザーに以下の形式で報告してください：

```
## 不足しているサブエージェント

以下のサブエージェントが見つかりませんでした：
- [不足しているエージェント名]: [役割の説明]

これらのサブエージェントを作成するか、既存の代替エージェントを指定してください。
```

報告後、ユーザーの指示を待ってください。

---

## 実装要件

$ARGUMENTS

---

## 実装プロセス

すべてのサブエージェントが利用可能な場合、以下のプロセスを実行してください：

### フェーズ1: 実装

1. **調査**（必要に応じて）
   - 調査系サブエージェントを使用して、実装方法や既存コードのパターンを調査

2. **実装**
   - 実装系サブエージェントを使用して、要件に基づき機能を実装

### フェーズ2: レビュー

3. **コードレビュー**
   - コードレビューサブエージェントを使用して、実装したコードをレビュー
   - 以下の観点でチェック：
     - コード品質
     - バグの有無
     - パフォーマンス
     - セキュリティ
     - 可読性・保守性

### フェーズ3: 反復改善

4. **問題の有無を判定**
   - コードレビュー（フェーズ2）の結果を確認

   **問題がある場合**:
   - 問題点をリストアップ
   - 調査系サブエージェントで原因・解決策を調査（必要に応じて）
   - フェーズ1（実装）に戻り、問題を修正
   - フェーズ2を再実行
   - これを問題がなくなるまで繰り返す

   **問題がない場合**:
   - 完了報告に進む

### フェーズ4: 完了報告

5. **結果報告**
   以下の形式で報告：

   ```
   ## 機能実装完了

   ### 実装内容
   - [実装した機能の概要]

   ### 変更ファイル
   - [ファイルパス]: [変更内容]

   ### 反復回数
   - 合計: [N]回

   ### 最終レビュー結果
   - [レビュー結果サマリ]
   ```

---

## 注意事項

- 各フェーズで調査系サブエージェントは必要に応じて随時活用してください
- 反復は最大5回までとし、それを超える場合はユーザーに相談してください
- 大きな方針変更が必要な場合は、ユーザーに確認を取ってください
